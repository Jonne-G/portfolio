<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Roof Generator - Jonne Geven</title><meta name="robots" content="noindex,nofollow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="alternate" type="application/atom+xml" href="https://jonne-g.github.io/portfolio/feed.xml"><link rel="alternate" type="application/json" href="https://jonne-g.github.io/portfolio/feed.json"><meta property="og:title" content="Roof Generator"><meta property="og:site_name" content="Jonne Geven, Technical Artist"><meta property="og:description" content="Near the end of development on CrossfireX: Operation Spectre, it became clear it wouldn't be possible for the modelling department to populate the entire level with roofs. There was simply too much to do. The brief was simple: Create a tool that can quickly make&hellip;"><meta property="og:url" content="https://jonne-g.github.io/portfolio/roof-generator/"><meta property="og:type" content="article"><link rel="preload" href="https://jonne-g.github.io/portfolio/assets/dynamic/fonts/publicsans/publicsans.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://jonne-g.github.io/portfolio/assets/dynamic/fonts/exo/exo.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://jonne-g.github.io/portfolio/assets/css/style.css?v=60aacb2d0f75f03090a125d9cdfa50aa"><link rel="stylesheet" href="https://jonne-g.github.io/portfolio/assets/css/photoswipe.css?v=7331f6eb15671b2fc8e3ffd46e849f7b"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://jonne-g.github.io/portfolio/roof-generator/"},"headline":"Roof Generator","datePublished":"2022-04-13T21:11","dateModified":"2022-04-29T22:39","description":"Near the end of development on CrossfireX: Operation Spectre, it became clear it wouldn't be possible for the modelling department to populate the entire level with roofs. There was simply too much to do. The brief was simple: Create a tool that can quickly make&hellip;","author":{"@type":"Person","name":"Jonne Geven","url":"https://jonne-g.github.io/portfolio/authors/jonne-geven/"},"publisher":{"@type":"Organization","name":"Jonne Geven"}}</script><style>.pswp--svg .pswp__button,
				          .pswp--svg .pswp__button--arrow--left:before,
				          .pswp--svg .pswp__button--arrow--right:before {
					          background-image: url(https://jonne-g.github.io/portfolio/assets/svg/gallery-icons-light.svg);
			              }</style></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo">Jonne Geven</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://jonne-g.github.io/portfolio/portfolio/" target="_self">Portfolio</a></li><li><a href="https://jonne-g.github.io/portfolio/contact/" target="_self">Contact</a></li></ul></nav></header><main><article class="post"><div class="wrapper post__entry"><div><div class="post__iframe"><iframe loading="lazy" width="560" height="315" src="https://www.youtube.com/embed/_Dx9DBkYdtQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div><p>Near the end of development on CrossfireX: Operation Spectre, it became clear it wouldn't be possible for the modelling department to populate the entire level with roofs. There was simply too much to do.</p><p>The brief was simple: Create a tool that can quickly make roof&nbsp; geometry and make it work inside Maya using Houdini Engine.<br>Since the roofs were only visible from afar or from below, it was possible to use relatively simple geometry and focus on making the system quick, and easy to use.<br></p><p>Though making the tool work properly with Houdini engine in Maya was a real challenge, the final result helped speed up work on the level freeing up time for the artists to work on other parts of the project.<br></p><h2 id="using-the-tool-in-maya">Using the tool in Maya</h2><p>To make the process of creating roofs as fast as possible, the process was made into a borderline one-click process.<br>Below you can see a demonstration of the three modes the tool operates on in Maya:</p><h4 id="object-mode">Object mode</h4><figure class="post__image post__image--center"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/roof_generator-making_off-object_selection.gif" height="450" width="800" alt="object selection inside Maya"></figure><h4 id="face-mode">Face mode</h4><figure class="post__image post__image--center"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/roof_generator-making_off-face_selection-2.gif" height="450" width="800" alt="face selection in maya"></figure><h4 id="edge-mode">Edge mode</h4><figure class="post__image post__image--center"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/roof_generator-making_off-edge_selection.gif" height="450" width="800" alt="edge selection in Maya"></figure><p>One interesting note on the edge-mode is the additions of gables.<br>This was one of the requirements: an easy way of adding gables to the roofs.<br>In Houdini, the tool used groups for this, and to translate this to Maya, I used edge selection instead.</p><p>This "one-click" process is in part enabled by a maya shelf tool.<br>Once the user clicks this button a few things happen:</p><ol><li>In case of face- or edge-selection, the actual selection is stored<br>&nbsp;and the whole object is selected instead</li><li>If not already loaded, Houdini engine is enabled</li><li>The roof-generator Maya-version is placed in the scene<br>with the object selection as its target</li><li>In case of face- or edge-selection, an additional two parameters are populated:<br>An "id" parameter passing through the type of the selection (face or edge),<br>and the selection in a way Houdini can read it</li><li>Finally, the roof-generator HDA is triggered again using a deferred-loading call.<br>This call is deferred as sometimes the HDA is placed before Houdini engine is<br>actually loaded.</li></ol><p>Once this whole process is finished, the user will have a roof ready to export to game!</p><h2 id="mayahda-wrapper">Maya-HDA wrapper</h2><p>In the placement process above I mentioned a Maya-version of the HDA.<br>This is referring to a HDA wrapper made to have Maya usage of Houdini much easier.<br>The wrapper contains a section that allows for specifying different behaviour for each type of component selection in Maya as well as the parameters to accompany it.</p><p>Of course it's not able to do all of this work alone, and on the Maya side it is paired with a python module that neatly wraps away the launching process mentioned above.<br>Because of this, anyone looking to launch a HDA in Maya, only needs a single function:<br>placeHda() or placeHdaWithSelection().<br></p><h2 id="stress-test">Stress test</h2><p>Of course one of the fun parts of having a procedural system is stress testing!<br>Below is a looped animation of the roof-generator tackling a blend-shaped input.<br>As far as stability goes, I think it does pretty well!</p><figure class="post__image post__image--center"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/roof_generator-stress_test-loopable.webp" sizes="100vw" srcset="https://jonne-g.github.io/portfolio/media/posts/7/responsive/roof_generator-stress_test-loopable-xs.webp 300w, https://jonne-g.github.io/portfolio/media/posts/7/responsive/roof_generator-stress_test-loopable-sm.webp 480w, https://jonne-g.github.io/portfolio/media/posts/7/responsive/roof_generator-stress_test-loopable-md.webp 768w, https://jonne-g.github.io/portfolio/media/posts/7/responsive/roof_generator-stress_test-loopable-lg.webp 1024w, https://jonne-g.github.io/portfolio/media/posts/7/responsive/roof_generator-stress_test-loopable-xl.webp 1360w, https://jonne-g.github.io/portfolio/media/posts/7/responsive/roof_generator-stress_test-loopable-2xl.webp 1600w" height="450" width="800" alt="Stress-test loop"></figure><h2 id="looking-back-and-future-plans">Looking back and future plans</h2><p>Making this tool was one hell of a ride. It was almost a perfect 50/50 split of making the tool, and making it work inside Maya. Using the tool again whilst recording the above videos made me realize it that was worth it.<br>Seeing all the buildings have roofs was quite the sight!<br>And in the end, it did its job: It helped ship the level and allowed the artists to spend more time on the fun stuff!</p><p>As for plans for the future, I purposefully set up the tool in a very modular way.<br>When the opportunity/need arises, I would love to go back and add support for more roof types!<br></p><h2 id="some-more-shots">Some more shots</h2><p>A few more captures of results in-game</p><div class="gallery-wrapper"><div class="gallery" data-columns="3"><figure class="gallery__item"><a href="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_01.png" data-size="2560x1440"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_01-thumbnail.png" height="405" width="720" alt=""></a></figure><figure class="gallery__item"><a href="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_02.png" data-size="2560x1440"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_02-thumbnail.png" height="405" width="720" alt=""></a></figure><figure class="gallery__item"><a href="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_03.png" data-size="2560x1440"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_03-thumbnail.png" height="405" width="720" alt=""></a></figure><figure class="gallery__item"><a href="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_04.png" data-size="2560x1440"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_04-thumbnail.png" height="405" width="720" alt=""></a></figure><figure class="gallery__item"><a href="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_05.png" data-size="2560x1440"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_05-thumbnail.png" height="405" width="720" alt=""></a></figure><figure class="gallery__item"><a href="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_06.png" data-size="2560x1440"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_06-thumbnail.png" height="405" width="720" alt=""></a></figure><figure class="gallery__item"><a href="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_07.png" data-size="2560x1440"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_07-thumbnail.png" height="405" width="720" alt=""></a></figure><figure class="gallery__item"><a href="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_08.png" data-size="2560x1440"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_08-thumbnail.png" height="405" width="720" alt=""></a></figure><figure class="gallery__item"><a href="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_09.png" data-size="2560x1440"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_09-thumbnail.png" height="405" width="720" alt=""></a></figure><figure class="gallery__item"><a href="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_10.png" data-size="2560x1440"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_10-thumbnail.png" height="405" width="720" alt=""></a></figure><figure class="gallery__item"><a href="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_11.png" data-size="2560x1440"><img decoding="async" loading="lazy" src="https://jonne-g.github.io/portfolio/media/posts/7/gallery/image_11-thumbnail.png" height="405" width="720" alt=""></a></figure></div></div></div></article></main><footer class="footer"><div class="footer__social"><a href="https://twitter.com/TechnicallyArt1" aria-label="Twitter"><svg><use xlink:href="https://jonne-g.github.io/portfolio/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://www.linkedin.com/in/jonne-geven/" aria-label="LinkedIn"><svg><use xlink:href="https://jonne-g.github.io/portfolio/assets/svg/svg-map.svg#linkedin"/></svg> </a><a href="https://www.youtube.com/channel/UCwsdnWaddFCekGWf8omcYYg" aria-label="Youtube"><svg><use xlink:href="https://jonne-g.github.io/portfolio/assets/svg/svg-map.svg#youtube"/></svg></a></div><div class="footer__copyright"><p>Jonne Geven, Technical Artist</p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://jonne-g.github.io/portfolio/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://jonne-g.github.io/portfolio/assets/js/scripts.min.js?v=6ca8b60e6534a3888de1205e82df8528"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://jonne-g.github.io/portfolio/assets/js/photoswipe.min.js?v=b586a3bc288c989ecce7b81b48e35855"></script><script defer="defer" src="https://jonne-g.github.io/portfolio/assets/js/photoswipe-ui-default.min.js?v=9952f77ca2b8fbc9449a268008ea8dee"></script><script>var initPhotoSwipeFromDOM=function(gallerySelector){var parseThumbnailElements=function(el){var thumbElements=el.childNodes,numNodes=thumbElements.length,items=[],figureEl,linkEl,size,item;for(var i=0;i<numNodes;i++){figureEl=thumbElements[i];if(figureEl.nodeType!==1){continue;}
          linkEl=figureEl.children[0];size=linkEl.getAttribute('data-size').split('x');item={src:linkEl.getAttribute('href'),w:parseInt(size[0],10),h:parseInt(size[1],10)};if(figureEl.children.length>1){item.title=figureEl.children[1].innerHTML;}
          if(linkEl.children.length>0){item.msrc=linkEl.children[0].getAttribute('src');}
          item.el=figureEl;items.push(item);}
          return items;};var closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn));};var onThumbnailsClick=function(e){e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=false;var eTarget=e.target||e.srcElement;var clickedListItem=closest(eTarget,function(el){return(el.tagName&&el.tagName.toUpperCase()==='FIGURE');});if(!clickedListItem){return;}
          var clickedGallery=clickedListItem.parentNode,childNodes=clickedListItem.parentNode.childNodes,numChildNodes=childNodes.length,nodeIndex=0,index;for(var i=0;i<numChildNodes;i++){if(childNodes[i].nodeType!==1){continue;}
          if(childNodes[i]===clickedListItem){index=nodeIndex;break;}
          nodeIndex++;}
          if(index>=0){openPhotoSwipe(index,clickedGallery);}
          return false;};var photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5){return params;}
          var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue;}
          var pair=vars[i].split('=');if(pair.length<2){continue;}
          params[pair[0]]=pair[1];}
          if(params.gid){params.gid=parseInt(params.gid,10);}
          return params;};var openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll('.pswp')[0],gallery,options,items;items=parseThumbnailElements(galleryElement);options={galleryUID:galleryElement.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(index){var thumbnail=items[index].el.getElementsByTagName('img')[0],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width};},
          mainClass:'pswp--dark',
          preload: [1,2],
          hideAnimationDuration:200,
          showAnimationDuration:0,
          bgOpacity: 0.7,
          showHideOpacity:true,
          closeOnScroll: true,
          arrowKeys: true,
          closeEl: true,
          captionEl: true,
          fullscreenEl: true,
          zoomEl: true,
          shareEl: true,
          counterEl: true,
          arrowEl: true,
          preloaderEl: true
          };if(fromURL){if(options.galleryPIDs){for(var j=0;j<items.length;j++){if(items[j].pid==index){options.index=j;break;}}}else{options.index=parseInt(index,10)-1;}}else{options.index=parseInt(index,10);}
          if(isNaN(options.index)){return;}
          if(disableAnimation){options.showAnimationDuration=0;}
          gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init();gallery.options.escKey=true;};var galleryElements=document.querySelectorAll(gallerySelector);for(var i=0,l=galleryElements.length;i<l;i++){galleryElements[i].setAttribute('data-pswp-uid',i+1);galleryElements[i].onclick=onThumbnailsClick;}
          var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],true,true);}};window.addEventListener('load', function () {initPhotoSwipeFromDOM('.gallery');}, false);</script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></body></html>